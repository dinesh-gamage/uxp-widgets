{"version":"2.0","models":[{"Key":"6","Name":"MAF","Definition":{"version":"v2","attributes":[],"flows":{"blocks":[{"title":"Action","type":"actionstart","id":"12f379fb-c7a6-47b8-f2d2-1ecb51c14b9c","position":{"left":60,"top":60},"surface":"get_tasks","connections":{"inputs":[],"outputs":[{"source":"12f379fb-c7a6-47b8-f2d2-1ecb51c14b9c:output:max","target":"055c92f4-d416-496e-f28b-aa0b76370c4d:input:max"},{"source":"12f379fb-c7a6-47b8-f2d2-1ecb51c14b9c:output:lastPageToken","target":"055c92f4-d416-496e-f28b-aa0b76370c4d:input:lastPageToken"},{"source":"12f379fb-c7a6-47b8-f2d2-1ecb51c14b9c:output:sortBy","target":"055c92f4-d416-496e-f28b-aa0b76370c4d:input:sortBy"},{"source":"12f379fb-c7a6-47b8-f2d2-1ecb51c14b9c:output:query","target":"055c92f4-d416-496e-f28b-aa0b76370c4d:input:query"}]},"inputValues":[],"outputValues":[{"id":"output","type":"","label":"All Output","description":"","documentation":""},{"id":"__error__","type":"error","label":"Error","description":"","documentation":""},{"id":"max","type":"","label":"max","description":"","documentation":""},{"id":"lastPageToken","type":"","label":"lastPageToken","description":"","documentation":""},{"id":"sortBy","type":"","label":"sortBy","description":"","documentation":""},{"id":"query","type":"","label":"query","description":"","documentation":""}],"actionName":"get_tasks","initiate":false,"published":false,"debug":true,"roles":[],"static":true,"canOverrideCredentials":false},{"title":"Output","type":"actionoutput","id":"0ef25ae6-5e3b-4c45-8f91-112449b93ab6","position":{"left":718.00000762939453,"top":273.0000114440918},"surface":"get_tasks","connections":{"inputs":[{"source":"055c92f4-d416-496e-f28b-aa0b76370c4d:output:pageToken","target":"0ef25ae6-5e3b-4c45-8f91-112449b93ab6:input:input"}],"outputs":[]},"inputValues":[{"id":"input","type":"","label":"Value","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"trigger","type":"","label":"Trigger","value":"","description":"","documentation":"","transformation":"","disablelog":""}],"outputValues":[],"fieldName":"pageToken"},{"title":"Output","type":"actionoutput","id":"ce1a5b01-1819-4842-9497-77763cb12db7","position":{"left":680.00000762939453,"top":152.99999618530273},"surface":"get_tasks","connections":{"inputs":[{"source":"055c92f4-d416-496e-f28b-aa0b76370c4d:output:items","target":"ce1a5b01-1819-4842-9497-77763cb12db7:input:input"}],"outputs":[]},"inputValues":[{"id":"input","type":"","label":"Value","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"trigger","type":"","label":"Trigger","value":"","description":"","documentation":"","transformation":"","disablelog":""}],"outputValues":[],"fieldName":"items"},{"title":"ES6Javascript","type":"es6javascript","id":"54220138-0fb8-49fd-d1db-d7d72290194d","position":{"left":436,"top":70},"surface":"get_incidents","connections":{"inputs":[{"source":"15ee3e16-968f-4e19-f261-4debde2581c8:output:date","target":"54220138-0fb8-49fd-d1db-d7d72290194d:input:date"}],"outputs":[{"source":"54220138-0fb8-49fd-d1db-d7d72290194d:output:output","target":"07381254-f319-4aaa-802a-cc278f7a1368:input:input"}]},"inputValues":[{"id":"trigger","type":"","label":"Trigger","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"date","type":"","label":"date","value":"","description":"","documentation":"","transformation":"","disablelog":""}],"outputValues":[{"id":"__error__","type":"error","label":"Error","description":"","documentation":""},{"id":"output","type":"","label":"output","description":"","documentation":""}],"description":"","code":"let inputs = runtime.inputs();\r\nlet date = inputs.date;\r\n\r\nfunction randomNumber(min, max) {\r\n    return Math.floor(Math.random() * Math.floor((max - min) + min));\r\n}\r\n\r\n// generate random dataset\r\nlet DataSet = [];\r\n\r\nfor (let i = 0; i < 5; i++) {\r\n    // limit\r\n    let limit = 250;\r\n    if (i == 0) limit = 550;\r\n\r\n    // count \r\n    let count = randomNumber(50, limit + 200);\r\n\r\n    // percentage\r\n    let percentage = Math.round((count/limit)*100);\r\n\r\n    DataSet.push({\r\n        label: \"Level \" + (i+1).toString(),\r\n        limit: limit,\r\n        count: count,\r\n        percentage: percentage,\r\n        increased: (count > limit)\r\n    })\r\n\r\n}\r\n\r\nruntime.done({output: DataSet})","timeoutMilliseconds":5000},{"title":"Action","type":"actionstart","id":"15ee3e16-968f-4e19-f261-4debde2581c8","position":{"left":60,"top":60},"surface":"get_incidents","connections":{"inputs":[],"outputs":[{"source":"15ee3e16-968f-4e19-f261-4debde2581c8:output:date","target":"54220138-0fb8-49fd-d1db-d7d72290194d:input:date"}]},"inputValues":[],"outputValues":[{"id":"output","type":"","label":"All Output","description":"","documentation":""},{"id":"__error__","type":"error","label":"Error","description":"","documentation":""},{"id":"date","type":"","label":"date","description":"","documentation":""}],"actionName":"get_incidents","initiate":false,"published":false,"debug":false,"roles":[],"static":true,"canOverrideCredentials":false},{"title":"Output","type":"actionoutput","id":"07381254-f319-4aaa-802a-cc278f7a1368","position":{"left":862,"top":109},"surface":"get_incidents","connections":{"inputs":[{"source":"54220138-0fb8-49fd-d1db-d7d72290194d:output:output","target":"07381254-f319-4aaa-802a-cc278f7a1368:input:input"}],"outputs":[]},"inputValues":[{"id":"input","type":"","label":"Value","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"trigger","type":"","label":"Trigger","value":"","description":"","documentation":"","transformation":"","disablelog":""}],"outputValues":[],"fieldName":""},{"title":"ES6Javascript","type":"es6javascript","id":"055c92f4-d416-496e-f28b-aa0b76370c4d","position":{"left":381,"top":86},"surface":"get_tasks","connections":{"inputs":[{"source":"12f379fb-c7a6-47b8-f2d2-1ecb51c14b9c:output:max","target":"055c92f4-d416-496e-f28b-aa0b76370c4d:input:max"},{"source":"12f379fb-c7a6-47b8-f2d2-1ecb51c14b9c:output:lastPageToken","target":"055c92f4-d416-496e-f28b-aa0b76370c4d:input:lastPageToken"},{"source":"12f379fb-c7a6-47b8-f2d2-1ecb51c14b9c:output:sortBy","target":"055c92f4-d416-496e-f28b-aa0b76370c4d:input:sortBy"},{"source":"12f379fb-c7a6-47b8-f2d2-1ecb51c14b9c:output:query","target":"055c92f4-d416-496e-f28b-aa0b76370c4d:input:query"}],"outputs":[{"source":"055c92f4-d416-496e-f28b-aa0b76370c4d:output:items","target":"ce1a5b01-1819-4842-9497-77763cb12db7:input:input"},{"source":"055c92f4-d416-496e-f28b-aa0b76370c4d:output:pageToken","target":"0ef25ae6-5e3b-4c45-8f91-112449b93ab6:input:input"}]},"inputValues":[{"id":"trigger","type":"","label":"Trigger","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"max","type":"","label":"max","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"lastPageToken","type":"","label":"lastPageToken","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"sortBy","type":"","label":"sortBy","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"query","type":"","label":"query","value":"","description":"","documentation":"","transformation":"","disablelog":""}],"outputValues":[{"id":"__error__","type":"error","label":"Error","description":"","documentation":""},{"id":"items","type":"","label":"items","description":"","documentation":""},{"id":"pageToken","type":"","label":"pageToken","description":"","documentation":""}],"description":"","code":"let inputs = runtime.inputs();\r\nlet max = parseInt(inputs.max);\r\nlet lastPT = inputs.lastPageToken;\r\nlet sortBy = inputs.sortBy;\r\nlet query = inputs.query;\r\n\r\nif (!lastPT || lastPT.trim().length == 0) {\r\n    lastPT = 0;\r\n}\r\nelse {\r\n    lastPT = parseInt(lastPT)\r\n}\r\n\r\nlet DataSet = [\r\n    {\r\n        ref: 'IM201908231647',\r\n        description: \"AUH not working\",\r\n        userName: \"Dinesh Gamage\",\r\n        userImage: \"\",\r\n        type: \"case\",\r\n        date: \"2020/07/23\",\r\n        status: \"pending\"\r\n    },\r\n    {\r\n        ref: 'IM201908231649',\r\n        description: \"Ac Not working\",\r\n        userName: \"Amal Shanaka\",\r\n        userImage: \"\",\r\n        type: \"case\",\r\n        date: \"2020/07/23\",\r\n        status: \"review\"\r\n    },\r\n    {\r\n        ref: 'IM201908231647',\r\n        description: \"AUH not working\",\r\n        userName: \"Chathura Silva\",\r\n        userImage: \"\",\r\n        type: \"memo\",\r\n        date: \"2020/07/23\",\r\n        status: \"pending\"\r\n    },\r\n    {\r\n        ref: 'IM201908231647',\r\n        description: \"AUH not working\",\r\n        userName: \"Kesara Malinada\",\r\n        userImage: \"\",\r\n        type: \"memo\",\r\n        date: \"2020/07/23\",\r\n        status: \"review\"\r\n    },\r\n    {\r\n        ref: 'IM201908231647',\r\n        description: \"AUH not working\",\r\n        userName: \"Danushka Chathuranga\",\r\n        userImage: \"\",\r\n        type: \"case\",\r\n        date: \"2020/07/23\",\r\n        status: \"pending\"\r\n    },\r\n    {\r\n        ref: 'IM201908231647',\r\n        description: \"AUH not working\",\r\n        userName: \"Haran Shivanan\",\r\n        userImage: \"\",\r\n        type: \"memo\",\r\n        date: \"2020/07/23\",\r\n        status: \"review\"\r\n    },\r\n    {\r\n        ref: 'IM201908231647',\r\n        description: \"AUH not working\",\r\n        userName: \"Karthik\",\r\n        userImage: \"\",\r\n        type: \"case\",\r\n        date: \"2020/07/23\",\r\n        status: \"review\"\r\n    },\r\n    {\r\n        ref: 'IM201908231647',\r\n        description: \"AUH not working\",\r\n        userName: \"Roshan\",\r\n        userImage: \"\",\r\n        type: \"case\",\r\n        date: \"2020/07/23\",\r\n        status: \"pending\"\r\n    },\r\n    {\r\n        ref: 'IM201908231647',\r\n        description: \"AUH not working\",\r\n        userName: \"Muranga\",\r\n        userImage: \"\",\r\n        type: \"case\",\r\n        date: \"2020/07/23\",\r\n        status: \"pending\"\r\n    },\r\n    {\r\n        ref: 'IM201908231647',\r\n        description: \"AUH not working\",\r\n        userName: \"Sasika Jayawardena\",\r\n        userImage: \"\",\r\n        type: \"case\",\r\n        date: \"2020/07/23\",\r\n        status: \"pending\"\r\n    },\r\n    {\r\n        ref: 'IM201908231647',\r\n        description: \"AUH not working\",\r\n        userName: \"Kalindu Chethiya\",\r\n        userImage: \"\",\r\n        type: \"case\",\r\n        date: \"2020/07/23\",\r\n        status: \"pending\"\r\n    },\r\n    {\r\n        ref: 'IM201908231647',\r\n        description: \"AUH not working\",\r\n        userName: \"Gayan Gamage\",\r\n        userImage: \"\",\r\n        type: \"case\",\r\n        date: \"2020/07/23\",\r\n        status: \"pending\"\r\n    },\r\n    {\r\n        ref: 'IM201908231647',\r\n        description: \"AUH not working\",\r\n        userName: \"Lakmitha Ashan\",\r\n        userImage: \"\",\r\n        type: \"case\",\r\n        date: \"2020/07/23\",\r\n        status: \"pending\"\r\n    },\r\n    {\r\n        ref: 'IM201908231647',\r\n        description: \"AUH not working\",\r\n        userName: \"Praveeni Perera\",\r\n        userImage: \"\",\r\n        type: \"case\",\r\n        date: \"2020/07/23\",\r\n        status: \"pending\"\r\n    },\r\n    {\r\n        ref: 'IM201908231647',\r\n        description: \"AUH not working\",\r\n        userName: \"Channa Gamage\",\r\n        userImage: \"\",\r\n        type: \"case\",\r\n        date: \"2020/07/23\",\r\n        status: \"pending\"\r\n    },\r\n    {\r\n        ref: 'IM201908231647',\r\n        description: \"AUH not working\",\r\n        userName: \"Gayan Peshan\",\r\n        userImage: \"\",\r\n        type: \"case\",\r\n        date: \"2020/07/23\",\r\n        status: \"review\"\r\n    },\r\n    {\r\n        ref: 'IM201908231647',\r\n        description: \"AUH not working\",\r\n        userName: \"Binuri Jayamaha\",\r\n        userImage: \"\",\r\n        type: \"case\",\r\n        date: \"2020/07/23\",\r\n        status: \"pending\"\r\n    },\r\n    {\r\n        ref: 'IM201908231647',\r\n        description: \"AUH not working\",\r\n        userName: \"Amal Gamage\",\r\n        userImage: \"\",\r\n        type: \"case\",\r\n        date: \"2020/07/23\",\r\n        status: \"pending\"\r\n    },\r\n    {\r\n        ref: 'IM201908231647',\r\n        description: \"Ac Not working\",\r\n        userName: \"Dasun Shanaka\",\r\n        userImage: \"\",\r\n        type: \"case\",\r\n        date: \"2020/07/23\",\r\n        status: \"review\"\r\n    },\r\n    {\r\n        ref: 'IM201908231647',\r\n        description: \"AUH not working\",\r\n        userName: \"Chamara Silva\",\r\n        userImage: \"\",\r\n        type: \"memo\",\r\n        date: \"2020/07/23\",\r\n        status: \"pending\"\r\n    },\r\n    {\r\n        ref: 'IM201908231647',\r\n        description: \"AUH not working\",\r\n        userName: \" Malinada\",\r\n        userImage: \"\",\r\n        type: \"memo\",\r\n        date: \"2020/07/23\",\r\n        status: \"review\"\r\n    },\r\n    {\r\n        ref: 'IM201908231647',\r\n        description: \"AUH not working\",\r\n        userName: \" Chathuranga\",\r\n        userImage: \"\",\r\n        type: \"case\",\r\n        date: \"2020/07/23\",\r\n        status: \"pending\"\r\n    },\r\n    {\r\n        ref: 'IM201908231647',\r\n        description: \"AUH not working\",\r\n        userName: \" Shivanan\",\r\n        userImage: \"\",\r\n        type: \"memo\",\r\n        date: \"2020/07/23\",\r\n        status: \"review\"\r\n    },\r\n    {\r\n        ref: 'IM201908231647',\r\n        description: \"AUH not working\",\r\n        userName: \"Kasun\",\r\n        userImage: \"\",\r\n        type: \"case\",\r\n        date: \"2020/07/23\",\r\n        status: \"review\"\r\n    },\r\n    {\r\n        ref: 'IM201908231647',\r\n        description: \"AUH not working\",\r\n        userName: \"oshan\",\r\n        userImage: \"\",\r\n        type: \"case\",\r\n        date: \"2020/07/23\",\r\n        status: \"pending\"\r\n    },\r\n    {\r\n        ref: 'IM201908231647',\r\n        description: \"AUH not working\",\r\n        userName: \"namal\",\r\n        userImage: \"\",\r\n        type: \"case\",\r\n        date: \"2020/07/23\",\r\n        status: \"pending\"\r\n    },\r\n    {\r\n        ref: 'IM201908231647',\r\n        description: \"AUH not working\",\r\n        userName: \"Jayawardena\",\r\n        userImage: \"\",\r\n        type: \"case\",\r\n        date: \"2020/07/23\",\r\n        status: \"pending\"\r\n    },\r\n    {\r\n        ref: 'IM201908231647',\r\n        description: \"AUH not working\",\r\n        userName: \" Chethiya\",\r\n        userImage: \"\",\r\n        type: \"case\",\r\n        date: \"2020/07/23\",\r\n        status: \"pending\"\r\n    },\r\n    {\r\n        ref: 'IM201908231647',\r\n        description: \"AUH not working\",\r\n        userName: \"danuka\",\r\n        userImage: \"\",\r\n        type: \"case\",\r\n        date: \"2020/07/23\",\r\n        status: \"pending\"\r\n    },\r\n    {\r\n        ref: 'IM201908231647',\r\n        description: \"AUH not working\",\r\n        userName: \"lahiru\",\r\n        userImage: \"\",\r\n        type: \"case\",\r\n        date: \"2020/07/23\",\r\n        status: \"pending\"\r\n    },\r\n    {\r\n        ref: 'IM201908231647',\r\n        description: \"AUH not working\",\r\n        userName: \"Omal\",\r\n        userImage: \"\",\r\n        type: \"case\",\r\n        date: \"2020/07/23\",\r\n        status: \"pending\"\r\n    },\r\n    {\r\n        ref: 'IM201908231647',\r\n        description: \"AUH not working\",\r\n        userName: \"Charith\",\r\n        userImage: \"\",\r\n        type: \"case\",\r\n        date: \"2020/07/23\",\r\n        status: \"pending\"\r\n    },\r\n    {\r\n        ref: 'IM201908231647',\r\n        description: \"AUH not working\",\r\n        userName: \"Keerthi\",\r\n        userImage: \"\",\r\n        type: \"case\",\r\n        date: \"2020/07/23\",\r\n        status: \"review\"\r\n    },\r\n    {\r\n        ref: 'IM201908231647',\r\n        description: \"AUH not working\",\r\n        userName: \"Vihangi\",\r\n        userImage: \"\",\r\n        type: \"case\",\r\n        date: \"2020/07/23\",\r\n        status: \"pending\"\r\n    }\r\n]\r\n\r\n\r\n\r\nlet items = [];\r\n// filter by query\r\nif (query && query.trim().length > 0) {\r\n    let regEx = new RegExp(query, \"i\");\r\n\r\n    items = DataSet.filter((item) => {\r\n        return (regEx.test(item.ref.toLowerCase()) || regEx.test(item.userName.toLowerCase()))\r\n    })\r\n}\r\nelse {\r\n    items = DataSet;\r\n}\r\n\r\n// sort\r\nif (sortBy && sortBy.length > 0) {\r\n    items.sort(function (a, b) {\r\n        var keyA = new Date(a[sortBy]),\r\n            keyB = new Date(b[sortBy]);\r\n        // Compare the 2 dates\r\n        if (keyA < keyB) return -1;\r\n        if (keyA > keyB) return 1;\r\n        return 0;\r\n    });\r\n}\r\n\r\n// slice\r\nlet _items = items.slice(lastPT, lastPT+max);\r\n\r\nruntime.done({ items: _items, pageToken: (lastPT + _items.length).toString() })","timeoutMilliseconds":5000}],"position":{"top":0,"left":0}},"sources":[{"name":"get_tasks","published":false,"static":true,"initiate":false,"canOverrideCredentials":false,"outputs":["items","pageToken"],"parameters":["max","lastPageToken","sortBy","query"]},{"name":"get_incidents","published":false,"static":true,"initiate":false,"canOverrideCredentials":false,"outputs":[""],"parameters":["date"]}],"actions":[{"name":"get_tasks","published":false,"static":true,"initiate":false,"canOverrideCredentials":false,"outputs":["items","pageToken"],"parameters":["max","lastPageToken","sortBy","query"]},{"name":"get_incidents","published":false,"static":true,"initiate":false,"canOverrideCredentials":false,"outputs":[""],"parameters":["date"]}],"uioptions":{}},"UIDefinition":null,"MetadataDictionary":"null","ApiRoutes":[],"JSModules":[],"ModelCollections":[]}]}